# Controller

## Create Controller

For example, we create a Controller `student` in the module demo-student: 

### 1. Cli command

``` bash
$ vona :create:bean controller student --module=demo-student
```

### 2. Menu command

::: tip
Context Menu - [Module Path]: `Vona Create/Controller`
:::

## Controller Definition

``` typescript{1,3}
@Controller<IControllerOptionsStudent>('student')
export class ControllerStudent extends BeanBase {
  @Web.post('')
  @Api.body(v.object(EntityStudent))
  async create(@Arg.body() student: DtoStudentCreate): Promise<EntityStudent> {
    return await this.scope.service.student.create(student);
  }
}
```

- Controller Path: `'student'`
- Action Path : `''`

## Routes

Like `Fastify`, Vona also uses [find-my-way](https://github.com/delvedor/find-my-way) as the routing library. All Controller Actions that use the `@Web` decorator will be automatically registered in the routing table

The route path is composed of the Controller Path and the Action Path

### General format

``` bash
Route Path = GlobalPrefix + Module Url + Controller Path + Action Path
```

- GlobalPrefix: Project configuration: `app.config.server.globalPrefix`, default is `/api`
- Module Url: The Url fragment generated by the module name. For example, the module Url of module demo-student is `demo/student`

For example, the route of Controller `teacher` in module demo-student is as follows:

|Controller Path|Action Path| Route Path|
|--|--|--|
|teacher|empty|/api/demo/student/teacher|
|teacher|:id|/api/demo/student/teacher/:id|

### Simplification rule 1

If the Controller Path is the same as the module name, the duplicate part will be automatically removed

For example, the route of Controller `student` in module demo-student is as follows:

|Controller Path|Action Path| Route Path|
|--|--|--|
|student|empty|/api/demo/student|
|student|:id|/api/demo/student/:id|

### Simplification rule 2

If the Controller Path or Action Path is prefixed with `/`, then the Module Url is automatically removed

|Controller Path|Action Path| Route Path|
|--|--|--|
|/student|empty|/api/student|
|/student|:id|/api/student/:id|

### Simplification rule 3

If the Controller Path or Action Path is prefixed with `//`, then the GlobalPrefix and Module Url are automatically removed

|Controller Path|Action Path| Route Path|
|--|--|--|
|//student|empty|/student|
|//student|:id|/student/:id|

For example, the homepage of the project has the following route:

|Controller Path|Action Path| Route Path|
|--|--|--|
|any value|//|/|

## Request Query

## Request Params

## Request Body

## Request Headers

## Response Body